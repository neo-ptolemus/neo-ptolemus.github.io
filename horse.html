
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Import model</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.4.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
    <style>
        #text {
           position: absolute; /* Positionne l'élément de manière absolue sur la page */
           z-index: 999; /* S'assure qu'il est au-dessus de la scène A-Frame */
           background-color: rgba(255, 255, 255, 0.7); /* Rend le fond légèrement transparent */
           padding: 20px; /* Ajoute un peu de padding autour du texte */
           font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
           width:50%;
           margin:20px;
           border-radius: 8px;
       }
       h3{
        margin-left: 10px;
       }
       hr{
        border: 1px solid black;
       }
   </style>
</head>
<body>
    <a-scene>
        
            <a-assets>
                <img id="ground" src="images/sand.jpg">
                <img id="sky" src="images/puresky.jpeg" alt="">
                <a-asset-item id="room" src="models/gallery.gltf"></a-asset-item>
                <a-asset-item id="statue" src="models/horse/scene.gltf"></a-asset-item>
                <img id="pan_suivant" src="images/suivant.png">
                <img id="pan_retour" src="images/retour.png">
            </a-assets>
            <a-plane material="color:#FFFFFF; src:#ground; repeat:800 800" position="0 -1 -4"  color="green" rotation="-90 0 0" width="1000" height="1000"></a-plane>
            <a-sky src="#sky"></a-sky>
            <a-entity gltf-model="#room" position="-3 -0.77 -8" scale="1 1.5 1" rotation="0 180 0"></a-entity>

            <a-entity gltf-model="#statue" position="1.2 1.15 -5" scale="4 4 4" ></a-entity>
    
            <a-box id="doorB" color="#000000" position="4.7 2.2 -8.5" rotation="0 90 0" scale="0.2 7 6.5" 
            event-set__click="_event: click; onclick:nextSceneB()"></a-box>
            <a-box id="doorA" color="#000000" position="-5.4 2.2 -8.5" rotation="0 90 0" scale="0.2 7 6.5" 
            event-set__click="_event: click; onclick:nextSceneA()"></a-box>
    
            <a-box id="panel" color="#FFFFFF" position="-2.195 1.9 -3.808" rotation="0 -69.8 0" scale="0.065 0.7 1"
            event-set__click="_event: click; onclick:afficheTexte()">
            </a-box>
    
            <a-cylinder color="#AAAAAA" position="-2.195 0 -3.808" scale="0.03 3.47 0.03"></a-cylinder>
            <a-text value="Cliquez pour afficher les informations" position="-2.195 1.9 -3.765" rotation="0 19.8 0" align="center" color="#000000" width="1.270" wrap-count="15.760"></a-text>
    
            <a-image src="#pan_suivant" position="0.607 2.887 -8.267"></a-image>
            <a-image src="#pan_retour" position="-1.4 2.4 -8.267"></a-image>
    
            <div id="text" style="display:none"></div>
    
            <a-camera id="camera">
                <a-cursor></a-cursor>
            </a-camera>
        
    </a-scene>

    <script>

        function afficheTexte() {
            var x = document.getElementById("text");
            if (x.style.display === "none") {
                x.style.display = "block";
                x.innerHTML = "<h1>CHEVAL A LA HERSE</h1><hr><h3>Pierre Louis Rouillard - 1878</h3><p>Réalisé par Pierre Louis Rouillard, née le 16 janvier 1820 et mort en 2 juin 1881. C'est un sculpteur qui a comme spécialité la représentation d'animaux. Avec Henri Alfred Jacquemart, Pierre Jules Mène ou Antoine-Louis Barye il fait parti des sculpteur qui ont, dans la deuxième moitié du XIXe siècle , profité de l'engouement nouveau de la bourgeoisie pour les sculptures d'ameublement, particulièrement les sculptures d'animaux. Ici, l'œuvre représente un cheval et a été commandée pour l'Exposition universelle de 1878. Elle faisait partie d'un ensemble de quatre statues monumentales en fonte de fer et dorées à l'origine (avec Éléphant pris au piège et Rhinocéros d' Henri-Alfred Jacquemart ) qui entouraient la fontaine devant le palais du Trocadéro à Paris.</p>";
                //console.log("affiché");
            } else {
                x.style.display = "none";
                x.innerHTML = "";
                //console.log("caché");
            }
        }

        function nextSceneA() {
            var door = document.querySelector('#doorA');
            var cam = document.querySelector('#camera');
            var pos_door = new THREE.Vector3();
            var pos_cam = new THREE.Vector3();
            pos_door.setFromMatrixPosition(door.object3D.matrixWorld);
            pos_cam.setFromMatrixPosition(cam.object3D.matrixWorld);

            var d = distance(pos_cam.x, pos_cam.y, pos_door.x, pos_door.y)
            //console.log(d);

            if (d<=1.8) {
                window.location.href = 'herakles.html';
            }
            
        }

        function nextSceneB() {
            var door = document.querySelector('#doorB');
            var cam = document.querySelector('#camera');
            var pos_door = new THREE.Vector3();
            var pos_cam = new THREE.Vector3();
            pos_door.setFromMatrixPosition(door.object3D.matrixWorld);
            pos_cam.setFromMatrixPosition(cam.object3D.matrixWorld);

            var d = distance(pos_cam.x, pos_cam.y, pos_door.x, pos_door.y)
            //console.log(d);

            if (d<=1.8) {
                window.location.href = 'quiz_horse.html';
            }
            
        }


        function distance(x1, y1, x2, y2) 
        {
            return Math.sqrt((x2 - x1)*(x2 - x1) + (y2 - y1)*(y2 - y1));
        }
    </script>
    
</body>
</html>