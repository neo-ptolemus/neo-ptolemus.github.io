
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Import model</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.4.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
    <style>
        #text {
           position: absolute; /* Positionne l'élément de manière absolue sur la page */
           z-index: 999; /* S'assure qu'il est au-dessus de la scène A-Frame */
           background-color: rgba(255, 255, 255, 0.7); /* Rend le fond légèrement transparent */
           padding: 20px; /* Ajoute un peu de padding autour du texte */
           font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
           width:50%;
           margin:20px;
           border-radius: 8px;
       }
       h3{
        margin-left: 10px;
       }
       hr{
        border: 1px solid black;
       }
   </style>
</head>
<body>
    <a-scene>
        <a-assets>
            <img id="ground" src="images/sand.jpg">
            <img id="sky" src="images/puresky.jpeg" alt="">
            <a-asset-item id="muse" src="models/abandoned_brick_room/scene.gltf"></a-asset-item>
        </a-assets>
        <a-plane material="color:#FFFFFF; src:#ground; repeat:800 800" position="0 0 -4"  color="green" rotation="-90 0 0" width="1000" height="1000"></a-plane>
        <a-sky src="#sky"></a-sky>
        <a-entity gltf-model="#muse" scale="2 2 2" position="5 -1.5 -5"></a-entity>

        <a-box id="door" color="#000000" position="12.5 1.8 -10" rotation="0 34.5 0" scale="0.2 4.3 2.4" 
        event-set__click="_event: click; onclick:nextScene()"></a-box>

        <a-box id="panel" color="#FFFFFF" position="3.6 1.9 -7" rotation="0 56 0" scale="0.065 0.7 1"
        event-set__click="_event: click; onclick:test()">
        </a-box>

        <a-cylinder color="#AAAAAA" position="3.6 0 -7" scale="0.03 3.47 0.03"></a-cylinder>
        <a-text value="Cliquez pour afficher les informations" position="3.6 1.9 -6.95" rotation="0 -34 0" align="center" color="#000000" width="1.270" wrap-count="15.760"></a-text>


        <div id="text" style="display:none">Coucou</div>

        <a-camera id="camera">
            <a-cursor></a-cursor>
        </a-camera>
    </a-scene>

    <script>

        function test() {
            console.log("coucou");
            var x = document.getElementById("text");
            if (x.style.display === "none") {
                x.style.display = "block";
                x.innerHTML = "<h1>TITRE DE LA STATUE</h1><hr><h3>Artiste - date - medium</h3><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce felis dolor, finibus vitae aliquam a, auctor vitae enim. Sed in lorem commodo, lacinia magna vel, hendrerit ligula. Quisque ac elit lacus. Nulla vehicula ullamcorper condimentum. Nunc volutpat nunc tristique, pellentesque justo ac, luctus erat. Duis feugiat fermentum lorem vel porta. Vivamus elementum sit amet justo in bibendum. Aliquam sed laoreet ex.</p><p>Nulla rhoncus lectus a leo tincidunt, sed sagittis magna pellentesque. Mauris sed arcu sagittis, vehicula elit eget, tristique arcu. Praesent bibendum urna vitae dolor lacinia, blandit pretium elit blandit. Duis posuere magna nec placerat mattis. Maecenas eleifend non metus ut gravida. Sed et neque urna. Phasellus eu finibus massa. Praesent ut libero sapien. Aliquam eu pharetra lorem. Nulla accumsan porttitor turpis eu interdum. Nunc placerat nisl velit, vel consequat elit bibendum venenatis. Morbi convallis, lacus eget mollis tincidunt, eros felis gravida justo, quis sagittis elit lacus sed nulla. Proin fringilla diam sit amet nibh lobortis, eget semper nunc suscipit. Praesent dictum interdum libero.</p>";
                console.log("affiché");
            } else {
                x.style.display = "none";
                x.innerHTML = "";
                console.log("caché");
            }
        }

        function nextScene() {
            var door = document.querySelector('#door');
            var cam = document.querySelector('#camera');
            var pos_door = new THREE.Vector3();
            var pos_cam = new THREE.Vector3();
            pos_door.setFromMatrixPosition(door.object3D.matrixWorld);
            pos_cam.setFromMatrixPosition(cam.object3D.matrixWorld);

            var d = distance(pos_cam.x, pos_cam.y, pos_door.x, pos_door.y)
            //console.log(d);

            if (d<=1.8) {
                window.location.href = 'scene2.html';
            }
            
        }

        function distance(x1, y1, x2, y2) 
        {
            return Math.sqrt((x2 - x1)*(x2 - x1) + (y2 - y1)*(y2 - y1));
        }
    </script>
    
</body>
</html>